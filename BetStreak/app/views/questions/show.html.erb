<h1> Question Page! </h1>

<h1> Game: <%= @reg.game.title %> </h1>
<h1> People Remaining: <%= @players_rem %> </h1>
<h1> Questions Below: (You have two minutes to answer for this inning!)</h1>

<div>Answer before time runs out: <span id="time">02:00</span>!</div>

<% @questions.each do |q| %>
  <h2> <%= q.q_num %>) <%= q.content %></h2></br>
  <h2> Date and Time Required: <%= q.datetime_required %></h2></br>
  <%= render 'form' %>
<% end %>


<script>
function startTimer(duration, display) {
    var timer = duration, minutes, seconds;
    setInterval(function () {
        minutes = parseInt(timer / 60, 10);
        seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        display.textContent = minutes + ":" + seconds;

        if (--timer < 0) {
            document.getElementById("time").innerHTML = "Time Ran Out! You lost!";
            document.getElementById("radios_and_submit").style.visibility = "hidden";
            document.getElementById("nav_to_lost").style.visibility = "visible";
        }
    }, 1000);
}

window.onload = function () {
    var twoMinutes = 60 * 2,
        display = document.querySelector('#time');
    startTimer(twoMinutes, display);
};
</script>
